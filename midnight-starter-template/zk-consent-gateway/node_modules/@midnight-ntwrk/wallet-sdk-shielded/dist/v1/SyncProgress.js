export const SyncProgress = {
    isCompleteWithin(data, maxGap = 50n) {
        const applyLag = BigInt(Math.abs(Number(data.highestRelevantWalletIndex - data.appliedIndex)));
        return data.isConnected && applyLag <= maxGap;
    },
};
export const createSyncProgress = (params = {}) => {
    const { appliedIndex = 0n, highestRelevantWalletIndex = 0n, highestIndex = 0n, highestRelevantIndex = 0n, isConnected = false, } = params;
    const data = {
        appliedIndex,
        highestRelevantWalletIndex,
        highestIndex,
        highestRelevantIndex,
        isConnected,
    };
    return {
        ...data,
        isStrictlyComplete() {
            return SyncProgress.isCompleteWithin(this, 0n);
        },
        isCompleteWithin(maxGap) {
            return SyncProgress.isCompleteWithin(this, maxGap);
        },
    };
};
