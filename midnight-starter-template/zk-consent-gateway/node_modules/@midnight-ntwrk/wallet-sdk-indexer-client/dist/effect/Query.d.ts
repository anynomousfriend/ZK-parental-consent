import { Effect, Context } from 'effect';
import { ClientError, ServerError } from '@midnight-ntwrk/wallet-sdk-utilities/networking';
import type { TypedDocumentNode } from '@graphql-typed-document-node/core';
import { QueryClient } from './QueryClient.js';
/**
 * Describes an invocable GraphQL query.
 */
export interface Query<R, V, F extends Query.QueryFn<R, V> = Query.QueryFn<R, V>> extends Effect.Effect<F> {
    readonly tag: Context.Tag<Query<R, V>, F>;
    readonly run: F;
}
export declare namespace Query {
    /**
     * A GraphQL query (that may be parameterized with variables), that returns a typed document.
     *
     * @typeParam R The type returned by the GraphQL query.
     * @typeParam V A type that describes the variables present in the GraphQL query.
     *
     * @remarks
     * `Document` is a simple type alias for `TypedDocumentNode`.
     */
    type Document<R, V> = TypedDocumentNode<R, V>;
    /**
     * The variables of a {@link Document}.
     */
    type Variables<T> = T extends Document<any, infer V> ? V : never;
    /**
     * The expected result of executing a {@link Document}.
     */
    type Result<T> = T extends Document<infer R, any> ? R : never;
    /**
     * Describes a function that executes a GraphQL query over some given variables.
     *
     * @param variables The variables to be used in the GraphQL query.
     * @returns An `Effect` that will yield the result of the GraphQL query.
     */
    type QueryFn<R, V> = (variables: V) => Effect.Effect<R, ClientError | ServerError, QueryClient>;
}
/**
 * Constructs a new invocable GraphQL query.
 *
 * @param name The name of the tag to be associated with this query.
 * @param document A parsed GraphQL query document that represents the query.
 * @returns A {@link Query}.
 */
export declare const make: <Name extends string, T extends Query.Document<R, V>, R = Query.Result<T>, V = Query.Variables<T>>(name: Name, document: T) => Query<R, V>;
