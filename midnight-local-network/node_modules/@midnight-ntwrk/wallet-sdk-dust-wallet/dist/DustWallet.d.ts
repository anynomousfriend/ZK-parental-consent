import { DustParameters, DustPublicKey, DustSecretKey, FinalizedTransaction, Signature, SignatureVerifyingKey, UnprovenTransaction } from '@midnight-ntwrk/ledger-v7';
import { ProtocolState, ProtocolVersion } from '@midnight-ntwrk/wallet-sdk-abstractions';
import { Variant, WalletLike } from '@midnight-ntwrk/wallet-sdk-runtime/abstractions';
import { TransactionHistory } from '@midnight-ntwrk/wallet-sdk-shielded/v1';
import * as rx from 'rxjs';
import { Balance, CoinsAndBalancesCapability, UtxoWithFullDustDetails } from './CoinsAndBalances.js';
import { DustCoreWallet } from './DustCoreWallet.js';
import { KeysCapability } from './Keys.js';
import { SerializationCapability } from './Serialization.js';
import { SubmitTransactionMethod } from './Submission.js';
import { DustToken, DustTokenFullInfo, UtxoWithMeta } from './types/Dust.js';
import { AnyTransaction } from './types/ledger.js';
import { DefaultV1Configuration, DefaultV1Variant } from './V1Builder.js';
export type DustWalletCapabilities = {
    serialization: SerializationCapability<DustCoreWallet, null, string>;
    coinsAndBalances: CoinsAndBalancesCapability<DustCoreWallet>;
    keys: KeysCapability<DustCoreWallet>;
};
export declare class DustWalletState {
    static readonly mapState: (capabilities: DustWalletCapabilities) => (state: ProtocolState.ProtocolState<DustCoreWallet>) => DustWalletState;
    readonly protocolVersion: ProtocolVersion.ProtocolVersion;
    readonly state: DustCoreWallet;
    readonly capabilities: DustWalletCapabilities;
    get totalCoins(): readonly DustToken[];
    get availableCoins(): readonly DustToken[];
    get pendingCoins(): readonly DustToken[];
    get dustPublicKey(): DustPublicKey;
    get dustAddress(): string;
    get progress(): TransactionHistory.ProgressUpdate;
    constructor(state: ProtocolState.ProtocolState<DustCoreWallet>, capabilities: DustWalletCapabilities);
    walletBalance(time: Date): Balance;
    availableCoinsWithFullInfo(time: Date): readonly DustTokenFullInfo[];
    estimateDustGeneration(nightUtxos: ReadonlyArray<UtxoWithMeta>, currentTime: Date): ReadonlyArray<UtxoWithFullDustDetails>;
    serialize(): string;
}
export interface DustWallet extends WalletLike.WalletLike<[Variant.VersionedVariant<DefaultV1Variant>]> {
    readonly state: rx.Observable<DustWalletState>;
    start(secretKey: DustSecretKey): Promise<void>;
    createDustGenerationTransaction(currentTime: Date | undefined, ttl: Date, nightUtxos: Array<UtxoWithMeta>, nightVerifyingKey: SignatureVerifyingKey, dustReceiverAddress: string | undefined): Promise<UnprovenTransaction>;
    addDustGenerationSignature(transaction: UnprovenTransaction, signature: Signature): Promise<UnprovenTransaction>;
    calculateFee(transactions: ReadonlyArray<AnyTransaction>): Promise<bigint>;
    balanceTransactions(secretKey: DustSecretKey, transactions: ReadonlyArray<AnyTransaction>, ttl: Date, currentTime?: Date): Promise<UnprovenTransaction>;
    proveTransaction(transaction: UnprovenTransaction): Promise<FinalizedTransaction>;
    readonly submitTransaction: SubmitTransactionMethod<FinalizedTransaction>;
    serializeState(): Promise<string>;
    waitForSyncedState(allowedGap?: bigint): Promise<DustWalletState>;
}
export interface DustWalletClass extends WalletLike.BaseWalletClass<[Variant.VersionedVariant<DefaultV1Variant>]> {
    startWithSeed(seed: Uint8Array, dustParameters: DustParameters): DustWallet;
    startWithSecretKey(secretKey: DustSecretKey, dustParameters: DustParameters): DustWallet;
    restore(serializedState: string): DustWallet;
}
export declare function DustWallet(configuration: DefaultV1Configuration): DustWalletClass;
