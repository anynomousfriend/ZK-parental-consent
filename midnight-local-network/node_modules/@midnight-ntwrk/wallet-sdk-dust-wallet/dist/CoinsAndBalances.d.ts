import { DustCoreWallet } from './DustCoreWallet.js';
import { KeysCapability } from './Keys.js';
import { DustGenerationDetails, DustGenerationInfo, DustToken, DustTokenFullInfo, UtxoWithMeta } from './types/Dust.js';
export type Balance = bigint;
export type CoinWithValue<TToken> = {
    token: TToken;
    value: Balance;
};
export type UtxoWithFullDustDetails = Readonly<{
    utxo: UtxoWithMeta;
    dust: DustGenerationDetails;
}>;
export type CoinSelection<TInput> = (coins: readonly CoinWithValue<TInput>[], amountNeeded: Balance) => CoinWithValue<TInput>[];
export declare const chooseCoin: <TInput>(coins: readonly CoinWithValue<TInput>[], amountNeeded: Balance) => CoinWithValue<TInput>[];
export type CoinsAndBalancesCapability<TState> = {
    getWalletBalance(state: TState, time: Date): Balance;
    getAvailableCoins(state: TState): readonly DustToken[];
    getPendingCoins(state: TState): readonly DustToken[];
    getTotalCoins(state: TState): ReadonlyArray<DustToken>;
    getAvailableCoinsWithGeneratedDust(state: TState, currentTime: Date): ReadonlyArray<CoinWithValue<DustToken>>;
    getAvailableCoinsWithFullInfo(state: TState, blockTime: Date): readonly DustTokenFullInfo[];
    getGenerationInfo(state: TState, token: DustToken): DustGenerationInfo | undefined;
    /**
     * Splits provided Night utxos into the ones that will be used as inputs in the guaranteed and fallible sections
     */
    splitNightUtxos(nightUtxos: ReadonlyArray<UtxoWithFullDustDetails>): {
        guaranteed: ReadonlyArray<UtxoWithFullDustDetails>;
        fallible: ReadonlyArray<UtxoWithFullDustDetails>;
    };
    /**
     * Estimate how much Dust would be available to use if the Utxos provided were used for Dust generation from their beginning.
     * This function is particularly useful for the purpose of registering for Dust generation and selecting the Utxo to be used for paying fees and approving the registration itself.
     * @param state Current state of the wallet
     * @param nightUtxos Existing Night utxos
     * @param currentTime Current time
     * @returns Estimated Dust generation per Utxo
     */
    estimateDustGeneration(state: TState, nightUtxos: ReadonlyArray<UtxoWithMeta>, currentTime: Date): ReadonlyArray<UtxoWithFullDustDetails>;
};
export type DefaultCoinsAndBalancesContext = {
    keysCapability: KeysCapability<DustCoreWallet>;
};
export declare const makeDefaultCoinsAndBalancesCapability: (config: object, getContext: () => DefaultCoinsAndBalancesContext) => CoinsAndBalancesCapability<DustCoreWallet>;
