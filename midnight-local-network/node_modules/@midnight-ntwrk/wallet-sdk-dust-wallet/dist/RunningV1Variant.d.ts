import { Effect, Stream, Scope } from 'effect';
import { DustSecretKey, Signature, SignatureVerifyingKey, FinalizedTransaction, UnprovenTransaction } from '@midnight-ntwrk/ledger-v7';
import { Proving, WalletError } from '@midnight-ntwrk/wallet-sdk-shielded/v1';
import { WalletRuntimeError, Variant, StateChange } from '@midnight-ntwrk/wallet-sdk-runtime/abstractions';
import { DustToken, UtxoWithMeta } from './types/Dust.js';
import { KeysCapability } from './Keys.js';
import { SyncCapability, SyncService } from './Sync.js';
import { SimulatorState } from './Simulator.js';
import { CoinsAndBalancesCapability, CoinSelection } from './CoinsAndBalances.js';
import { TransactingCapability } from './Transacting.js';
import { SubmissionService, SubmitTransactionMethod } from './Submission.js';
import { DustCoreWallet } from './DustCoreWallet.js';
import { SerializationCapability } from './Serialization.js';
import { AnyTransaction } from './types/ledger.js';
export declare namespace RunningV1Variant {
    type Context<TSerialized, TSyncUpdate, TTransaction, TStartAux> = {
        serializationCapability: SerializationCapability<DustCoreWallet, null, TSerialized>;
        syncService: SyncService<DustCoreWallet, TStartAux, TSyncUpdate>;
        syncCapability: SyncCapability<DustCoreWallet, TSyncUpdate>;
        transactingCapability: TransactingCapability<DustSecretKey, DustCoreWallet, TTransaction>;
        provingService: Proving.ProvingService<TTransaction>;
        coinsAndBalancesCapability: CoinsAndBalancesCapability<DustCoreWallet>;
        keysCapability: KeysCapability<DustCoreWallet>;
        submissionService: SubmissionService<TTransaction>;
        coinSelection: CoinSelection<DustToken>;
    };
    type AnyContext = Context<any, any, any, any>;
}
export declare const V1Tag: unique symbol;
export type DefaultRunningV1 = RunningV1Variant<string, SimulatorState, FinalizedTransaction, DustSecretKey>;
export declare class RunningV1Variant<TSerialized, TSyncUpdate, TTransaction, TStartAux> implements Variant.RunningVariant<typeof V1Tag, DustCoreWallet> {
    #private;
    __polyTag__: typeof V1Tag;
    readonly state: Stream.Stream<StateChange.StateChange<DustCoreWallet>, WalletRuntimeError>;
    constructor(scope: Scope.Scope, context: Variant.VariantContext<DustCoreWallet>, v1Context: RunningV1Variant.Context<TSerialized, TSyncUpdate, TTransaction, TStartAux>);
    startSyncInBackground(startAux: TStartAux): Effect.Effect<void>;
    startSync(startAux: TStartAux): Stream.Stream<void, WalletError.WalletError, Scope.Scope>;
    createDustGenerationTransaction(currentTime: Date | undefined, ttl: Date, nightUtxos: ReadonlyArray<UtxoWithMeta>, nightVerifyingKey: SignatureVerifyingKey, dustReceiverAddress: string | undefined): Effect.Effect<UnprovenTransaction, WalletError.WalletError>;
    addDustGenerationSignature(transaction: UnprovenTransaction, signature: Signature): Effect.Effect<UnprovenTransaction, WalletError.WalletError>;
    calculateFee(transactions: ReadonlyArray<AnyTransaction>): Effect.Effect<bigint, WalletError.WalletError>;
    balanceTransactions(secretKey: DustSecretKey, transactions: ReadonlyArray<AnyTransaction>, ttl: Date, currentTime?: Date): Effect.Effect<UnprovenTransaction, WalletError.WalletError>;
    proveTransaction(transaction: UnprovenTransaction): Effect.Effect<TTransaction, WalletError.WalletError>;
    submitTransaction: SubmitTransactionMethod<TTransaction>;
}
