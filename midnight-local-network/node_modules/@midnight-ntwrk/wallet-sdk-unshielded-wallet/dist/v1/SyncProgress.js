export const SyncProgress = {
    isCompleteWithin(data, maxGap = 50n) {
        const applyLag = BigInt(Math.abs(Number(data.highestTransactionId - data.appliedId)));
        return data.isConnected && applyLag <= maxGap;
    },
};
export const createSyncProgress = (params = {}) => {
    const { appliedId = 0n, highestTransactionId = 0n, isConnected = false } = params;
    const data = {
        appliedId,
        highestTransactionId,
        isConnected,
    };
    return {
        ...data,
        isStrictlyComplete() {
            return SyncProgress.isCompleteWithin(this, 0n);
        },
        isCompleteWithin(maxGap) {
            return SyncProgress.isCompleteWithin(this, maxGap);
        },
    };
};
