import { ProtocolVersion } from '@midnight-ntwrk/wallet-sdk-abstractions';
import { SyncProgress, SyncProgressData } from './SyncProgress.js';
import { PublicKey } from '../KeyStore.js';
import { UnshieldedState, UnshieldedUpdate } from './UnshieldedState.js';
import * as ledger from '@midnight-ntwrk/ledger-v7';
import { Either } from 'effect';
import { WalletError } from './WalletError.js';
export type CoreWallet = Readonly<{
    state: UnshieldedState;
    publicKey: PublicKey;
    protocolVersion: ProtocolVersion.ProtocolVersion;
    progress: SyncProgress;
    networkId: string;
}>;
export declare const CoreWallet: {
    init(publicKey: PublicKey, networkId: string): CoreWallet;
    restore(state: UnshieldedState, publicKey: PublicKey, syncProgress: Omit<SyncProgressData, "isConnected">, protocolVersion: ProtocolVersion.ProtocolVersion, networkId: string): CoreWallet;
    updateProgress(wallet: CoreWallet, { appliedId, highestTransactionId, isConnected }: Partial<SyncProgressData>): CoreWallet;
    applyUpdate(coreWallet: CoreWallet, update: UnshieldedUpdate): Either.Either<CoreWallet, WalletError>;
    applyFailedUpdate(coreWallet: CoreWallet, update: UnshieldedUpdate): Either.Either<CoreWallet, WalletError>;
    rollbackUtxo(coreWallet: CoreWallet, utxo: ledger.Utxo): Either.Either<CoreWallet, WalletError>;
    spend(coreWallet: CoreWallet, utxo: ledger.Utxo): Either.Either<CoreWallet, WalletError>;
    spendUtxos(wallet: CoreWallet, utxos: ReadonlyArray<ledger.Utxo>): Either.Either<[ReadonlyArray<ledger.Utxo>, CoreWallet], WalletError>;
};
