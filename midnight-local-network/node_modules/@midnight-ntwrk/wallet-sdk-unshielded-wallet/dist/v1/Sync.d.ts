import { Scope, Stream, Either } from 'effect';
import { CoreWallet } from './CoreWallet.js';
import { Simulator, SimulatorState } from './Simulator.js';
import { WalletError } from './WalletError.js';
import { TransactionHistoryService } from './TransactionHistory.js';
import { WalletSyncUpdate } from './SyncSchema.js';
export interface SyncService<TState, TUpdate> {
    updates: (state: TState) => Stream.Stream<TUpdate, WalletError, Scope.Scope>;
}
export interface SyncCapability<TState, TUpdate> {
    applyUpdate: (state: TState, update: TUpdate) => Either.Either<TState, WalletError>;
}
export type IndexerClientConnection = {
    indexerHttpUrl: string;
    indexerWsUrl?: string;
};
export type DefaultSyncConfiguration = {
    indexerClientConnection: IndexerClientConnection;
};
export type DefaultSyncContext = {
    transactionHistoryService: TransactionHistoryService<WalletSyncUpdate>;
};
export declare const makeDefaultSyncService: (config: DefaultSyncConfiguration) => SyncService<CoreWallet, WalletSyncUpdate>;
export declare const makeDefaultSyncCapability: (_config: DefaultSyncConfiguration, getContext: () => DefaultSyncContext) => SyncCapability<CoreWallet, WalletSyncUpdate>;
export type SimulatorSyncConfiguration = {
    simulator: Simulator;
};
export type SimulatorSyncUpdate = {
    update: SimulatorState;
};
export declare const makeSimulatorSyncService: (config: SimulatorSyncConfiguration) => SyncService<CoreWallet, SimulatorSyncUpdate>;
export declare const makeSimulatorSyncCapability: () => SyncCapability<CoreWallet, SimulatorSyncUpdate>;
